<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lomse library. API documentation: CmdTransposeKey Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="lomse.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_100x195.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lomse library. API documentation
   &#160;<span id="projectnumber">0.27.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classCmdTransposeKey.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classCmdTransposeKey-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CmdTransposeKey Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="lomse__command_8h_source.html">lomse_command.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CmdTransposeKey:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classCmdTransposeKey.png" usemap="#CmdTransposeKey_map" alt=""/>
  <map id="CmdTransposeKey_map" name="CmdTransposeKey_map">
<area href="classCmdTranspose.html" alt="CmdTranspose" shape="rect" coords="0,112,118,136"/>
<area href="classDocCmdSimple.html" alt="DocCmdSimple" shape="rect" coords="0,56,118,80"/>
<area href="classDocCommand.html" alt="DocCommand" shape="rect" coords="0,0,118,24"/>
</map>
 </div></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A command for transposing a selection to a different key signature.</p>
<p>Transposing a melody to a new key signature is a two steps process: replace the key signature symbol by the new key signature and transpose the affected notes, chromatically, by the interval between the new key and the old key signatures.</p>
<p>Therefore, for transposing by key no special command is needed, just <a class="el" href="classCmdTransposeChromatically.html">CmdTransposeChromatically</a>; and also a method to compute the interval between two key signatures. Class KeyUtilities provides three methods for this: KeyUtilities::up_interval() KeyUtilities::down_interval() KeyUtilities::closest_interval()</p>
<p>Take into account that a command for transposing to a different key signature can not be a general basic command because it must deal with notes and with keys, and how to deal with them is an application behaviour decision that can not be generalized. There are many scenarios to consider:</p><ul>
<li>scores with key changes;</li>
<li>transposing instruments with a different key;</li>
<li>scope of the command: the command must affect to all the score? or only to a selection? (e.g. selected notes, a certain number of measures, other);</li>
<li>what to do when in the scope of the command there is a key signature change?:<ul>
<li>apply the same transposition interval to any key signature found in the selection set,</li>
<li>stop transposing,</li>
<li>other;</li>
</ul>
</li>
<li>what to do when not all notes are transposed:<ul>
<li>nothing,</li>
<li>insert the old key signature after the last transposed note,</li>
<li>other.</li>
</ul>
</li>
</ul>
<p>Because all of these considerations and possible application scenarios, Lomse can not provide a generic key transposition command. Nevertheless, for convenience, the <a class="el" href="classCmdTransposeKey.html">CmdTransposeKey</a> command has been created to be used in simple cases.</p>
<p>See constructor for details. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a255d20c7fdef759570d747f5f6753ba5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCmdTransposeKey.html#a255d20c7fdef759570d747f5f6753ba5">CmdTransposeKey</a> (<a class="el" href="classFIntval.html">FIntval</a> interval, const string &amp;name=&quot;&quot;)</td></tr>
<tr class="separator:a255d20c7fdef759570d747f5f6753ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCmdTranspose"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCmdTranspose')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCmdTranspose.html">CmdTranspose</a></td></tr>
<tr class="memitem:a135b3bc7b36785dd0c955970853c58b9 inherit pub_methods_classCmdTranspose"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCmdTranspose.html#a135b3bc7b36785dd0c955970853c58b9">get_cursor_update_policy</a> ()</td></tr>
<tr class="separator:a135b3bc7b36785dd0c955970853c58b9 inherit pub_methods_classCmdTranspose"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e6677076da06feca519a6cd7202bc82 inherit pub_methods_classCmdTranspose"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCmdTranspose.html#a2e6677076da06feca519a6cd7202bc82">get_undo_policy</a> ()</td></tr>
<tr class="separator:a2e6677076da06feca519a6cd7202bc82 inherit pub_methods_classCmdTranspose"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac985e7ddf827ee1b5f84c3be43bf2497 inherit pub_methods_classCmdTranspose"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCmdTranspose.html#ac985e7ddf827ee1b5f84c3be43bf2497">get_selection_update_policy</a> ()</td></tr>
<tr class="separator:ac985e7ddf827ee1b5f84c3be43bf2497 inherit pub_methods_classCmdTranspose"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classDocCmdSimple"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classDocCmdSimple')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classDocCmdSimple.html">DocCmdSimple</a></td></tr>
<tr class="memitem:a8bf9aa1e2a87310982879f8586918ac7 inherit pub_methods_classDocCmdSimple"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCmdSimple.html#a8bf9aa1e2a87310982879f8586918ac7">~DocCmdSimple</a> ()</td></tr>
<tr class="separator:a8bf9aa1e2a87310982879f8586918ac7 inherit pub_methods_classDocCmdSimple"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac016a50407fb24cd87e3a361e4fa31fd inherit pub_methods_classDocCmdSimple"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCmdSimple.html#ac016a50407fb24cd87e3a361e4fa31fd">is_composite</a> ()</td></tr>
<tr class="separator:ac016a50407fb24cd87e3a361e4fa31fd inherit pub_methods_classDocCmdSimple"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classDocCommand"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classDocCommand')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classDocCommand.html">DocCommand</a></td></tr>
<tr class="memitem:a242c0e33ef744f0b1958ac0c4176f823 inherit pub_methods_classDocCommand"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#a242c0e33ef744f0b1958ac0c4176f823">~DocCommand</a> ()</td></tr>
<tr class="separator:a242c0e33ef744f0b1958ac0c4176f823 inherit pub_methods_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf68714b754c17c1c7f9b36187d321c8 inherit pub_methods_classDocCommand"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#adf68714b754c17c1c7f9b36187d321c8">get_name</a> ()</td></tr>
<tr class="separator:adf68714b754c17c1c7f9b36187d321c8 inherit pub_methods_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83621dd7d28d0a6d474bfc14cbe5397d inherit pub_methods_classDocCommand"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#a83621dd7d28d0a6d474bfc14cbe5397d">is_reversible</a> ()</td></tr>
<tr class="separator:a83621dd7d28d0a6d474bfc14cbe5397d inherit pub_methods_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e21dc807ca0d323e046f7da6ac9ecf inherit pub_methods_classDocCommand"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#ac1e21dc807ca0d323e046f7da6ac9ecf">is_recordable</a> ()</td></tr>
<tr class="separator:ac1e21dc807ca0d323e046f7da6ac9ecf inherit pub_methods_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fcd738f3a6c0f375b44f16987a5937b inherit pub_methods_classDocCommand"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#a4fcd738f3a6c0f375b44f16987a5937b">get_error</a> ()</td></tr>
<tr class="separator:a4fcd738f3a6c0f375b44f16987a5937b inherit pub_methods_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classDocCommand"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classDocCommand')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classDocCommand.html">DocCommand</a></td></tr>
<tr class="memitem:a2ee82e62ad143d6c827a47312afd7add inherit pub_types_classDocCommand"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#a2ee82e62ad143d6c827a47312afd7add">ECmdCursorPolicy</a> </td></tr>
<tr class="separator:a2ee82e62ad143d6c827a47312afd7add inherit pub_types_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a7a5b650d7d0b6af7aba50ca0e4173b inherit pub_types_classDocCommand"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#a0a7a5b650d7d0b6af7aba50ca0e4173b">ECmdUndoPolicy</a> </td></tr>
<tr class="separator:a0a7a5b650d7d0b6af7aba50ca0e4173b inherit pub_types_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f5897829747c5a527d7c7f410182e30 inherit pub_types_classDocCommand"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDocCommand.html#a8f5897829747c5a527d7c7f410182e30">ECmdSelectionPolicy</a> </td></tr>
<tr class="separator:a8f5897829747c5a527d7c7f410182e30 inherit pub_types_classDocCommand"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a255d20c7fdef759570d747f5f6753ba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a255d20c7fdef759570d747f5f6753ba5">&#9670;&nbsp;</a></span>CmdTransposeKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CmdTransposeKey::CmdTransposeKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFIntval.html">FIntval</a>&#160;</td>
          <td class="paramname"><em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>name</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This command changes all the keys in the selection, and transposes chromatically all the notes in the selection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interval</td><td>The interval by which you want the selected music transposed. If the interval is negative, the direction of the transposition will be 'down'; otherwise it will be 'up'. </td></tr>
    <tr><td class="paramname">name</td><td>The displayable name for the command. If not specified or empty will be replaced by "Transpose key signature".</td></tr>
  </table>
  </dd>
</dl>
<p><b>Remarks</b></p><ul>
<li>If the selection does not contain key signatures, only the notes will be transposed.</li>
<li>If the selection only contains key signatures they will be changed but no notes will be transposed.</li>
<li>After executing the command:<ul>
<li>the selection set will be unmodified.</li>
<li>the cursor will not change its position.</li>
</ul>
</li>
</ul>
<p><b>Example</b></p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> CommandHandler::transpose(<a class="code" href="classFIntval.html">FIntval</a> interval)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (SpInteractor spInteractor = m_pPresenter-&gt;<a class="code" href="classPresenter.html#a3542802890a4615d251a5a786cee62b5">get_interactor</a>(0).lock())</div><div class="line">    {</div><div class="line">        <span class="keywordtype">string</span> name = gettext(<span class="stringliteral">&quot;Transpose key signature&quot;</span>);</div><div class="line">        SpInteractor-&gt;exec_command(</div><div class="line">            <span class="keyword">new</span> <a class="code" href="classCmdTransposeKey.html#a255d20c7fdef759570d747f5f6753ba5">CmdTransposeKey</a>(interval) );</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classCmdTransposeKey.html">CmdTransposeKey</a></li>
    <li class="footer">Generated on Thu Oct 29 2020 15:35:52 for Lomse library. API documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
